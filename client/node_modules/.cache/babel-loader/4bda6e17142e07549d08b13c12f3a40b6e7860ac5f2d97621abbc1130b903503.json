{"ast":null,"code":"import _slicedToArray from\"C:/projects/Reddit-Clone/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getPost,getSearchPost}from\"../../../store/store\";// import { Link } from \"react-router-dom\";\nimport logoImg from\"../../../img/logo.png\";import title from\"../../../img/titleLogo.png\";import{ArrowLeftOnRectangleIcon,ArrowRightOnRectangleIcon,Bars3Icon,ChevronDownIcon,MagnifyingGlassIcon,UserIcon}from\"@heroicons/react/24/outline\";import Avatar from\"../../../img/avatar.png\";import Button from\"../../Layout/Button\";import{useState,useContext}from\"react\";import AuthModalContext from\"./AuthModalContext\";import{userSlice,currentSub}from\"../../../store/store\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Header(){var dispatch=useDispatch();var navigate=useNavigate();useEffect(function(){document.addEventListener(\"click\",handleClickOutside,true);},[]);var refOne=useRef(null);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),search_content=_useState2[0],setSearch=_useState2[1];var handleClickOutside=function handleClickOutside(e){if(!refOne.current.contains(e.target)){setUserDropdownVisibilityClass(\"hidden\");}};var _useState3=useState(\"hidden\"),_useState4=_slicedToArray(_useState3,2),userDropdownVisibilityClass=_useState4[0],setUserDropdownVisibilityClass=_useState4[1];function toggleUserDropdown(){if(userDropdownVisibilityClass===\"hidden\"){setUserDropdownVisibilityClass(\"block\");}else{setUserDropdownVisibilityClass(\"hidden\");}}var authModal=useContext(AuthModalContext);var changePost=function changePost(subid){dispatch(getPost(subid));dispatch(currentSub.actions.setCurrentSub(subid));};// const user = useContext(UserContext);\nvar user=useSelector(function(state){return state.userSlice.userName;});function logout(e){authModal.removeCook(\"userName\");dispatch(userSlice.actions.LogoutUser(user));navigate(\"/\");}function SearchContent(){dispatch(getSearchPost(search_content));setSearch(\"\");}var activeEnter=function activeEnter(e){if(e.key===\"Enter\"){SearchContent();}};return/*#__PURE__*/_jsx(\"header\",{className:\"w-full bg-white p-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-4 flex relative \",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"flex\",onClick:function onClick(){changePost(-1);// navigate(\"/\");\n},children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"\",className:\"w-8 h-8 mr-1\"}),/*#__PURE__*/_jsx(\"img\",{src:title,alt:\"\",className:\"w-13 h-5 mr-4 mt-1\"})]}),/*#__PURE__*/_jsx(Bars3Icon,{className:\"w-6 h-6 text-gray-400 my-1 block md:hidden\",ref:refOne}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-reddit_gray-brighter px-3 flex rounded-md border border-reddit_gray-700 mx-4 flex-grow\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"text-gray-300 h-6 w-6 mt-1\",onClick:function onClick(){return SearchContent();}}),/*#__PURE__*/_jsx(\"input\",{value:search_content,type:\"text\",onChange:function onChange(e){return setSearch(e.target.value);},onKeyDown:function onKeyDown(e){return activeEnter(e);},className:\"bg-reddit_gray-brighter text-sm p-1 pl-2 pr-0 block focus:outline-none text-black relative  \",placeholder:\"Search Reddit\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mx-2 hidden sm:block\",children:[user===\"\"&&/*#__PURE__*/_jsx(Button,{outline:true,className:\"mr-1 h-8\",onClick:function onClick(){return authModal.setShow(\"login\");},children:\"Log In\"}),user===\"\"&&/*#__PURE__*/_jsx(Button,{className:\" h-8\",onClick:function onClick(){return authModal.setShow(\"register\");},children:\"Sign up\"}),!(user===\"\")&&/*#__PURE__*/_jsxs(\"span\",{className:\"block w-50 py-2 px-3 text-sm\",children:[\"Hello, \",user,\"!\"]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"rounded-md flex ml-3 \",onClick:function onClick(){return toggleUserDropdown();},children:[user===\"\"&&/*#__PURE__*/_jsx(UserIcon,{className:\"w-6 h-6 text-gray-400 m-1\"}),!(user===\"\")&&/*#__PURE__*/_jsx(\"div\",{className:\" w-8 h-8 bg-gray-600 rounded-md\",children:/*#__PURE__*/_jsx(\"img\",{src:Avatar,alt:\"\",style:{filter:\"invert(100%)\"},className:\"block\"})}),/*#__PURE__*/_jsx(ChevronDownIcon,{className:\"text-gray-500 w-5 h-5 mt-2 m-1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute right-0 top-8 bg-white border border-white z-10 rounded-md \"+userDropdownVisibilityClass,ref:refOne,children:[user===\"\"&&/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return authModal.setShow(\"login\");},className:\"block flex w-50 py-2 px-3 hover:bg-reddit_blue hover:text-white text-sm \",children:[/*#__PURE__*/_jsx(ArrowRightOnRectangleIcon,{className:\"w-5 h-5 mr-2\"}),\" Log In / Sign up\"]}),!(user===\"\")&&/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(e){return logout();},className:\"block flex w-50 py-2 px-3 hover:bg-gray-300 hover:text-black text-sm\",children:[/*#__PURE__*/_jsx(ArrowLeftOnRectangleIcon,{className:\"w-5 h-5 mr-2\"}),\"Logout\"]})]})]})});}","map":{"version":3,"names":["React","useEffect","useRef","useDispatch","useSelector","getPost","getSearchPost","logoImg","title","ArrowLeftOnRectangleIcon","ArrowRightOnRectangleIcon","Bars3Icon","ChevronDownIcon","MagnifyingGlassIcon","UserIcon","Avatar","Button","useState","useContext","AuthModalContext","userSlice","currentSub","useNavigate","Header","dispatch","navigate","document","addEventListener","handleClickOutside","refOne","search_content","setSearch","e","current","contains","target","setUserDropdownVisibilityClass","userDropdownVisibilityClass","toggleUserDropdown","authModal","changePost","subid","actions","setCurrentSub","user","state","userName","logout","removeCook","LogoutUser","SearchContent","activeEnter","key","value","setShow","filter"],"sources":["C:/projects/Reddit-Clone/client/src/components/views/UtilPage/Header.js"],"sourcesContent":["import React, { useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getPost, getSearchPost } from \"../../../store/store\";\r\n// import { Link } from \"react-router-dom\";\r\nimport logoImg from \"../../../img/logo.png\";\r\nimport title from \"../../../img/titleLogo.png\";\r\nimport {\r\n  ArrowLeftOnRectangleIcon,\r\n  ArrowRightOnRectangleIcon,\r\n  Bars3Icon,\r\n  ChevronDownIcon,\r\n  MagnifyingGlassIcon,\r\n  UserIcon,\r\n} from \"@heroicons/react/24/outline\";\r\nimport Avatar from \"../../../img/avatar.png\";\r\nimport Button from \"../../Layout/Button\";\r\nimport { useState, useContext } from \"react\";\r\nimport AuthModalContext from \"./AuthModalContext\";\r\nimport { userSlice, currentSub } from \"../../../store/store\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nexport default function Header() {\r\n  const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    document.addEventListener(\"click\", handleClickOutside, true);\r\n  }, []);\r\n\r\n  const refOne = useRef(null);\r\n\r\n  const [search_content, setSearch] = useState(\"\");\r\n\r\n  const handleClickOutside = (e) => {\r\n    if (!refOne.current.contains(e.target)) {\r\n      setUserDropdownVisibilityClass(\"hidden\");\r\n    }\r\n  };\r\n\r\n  const [userDropdownVisibilityClass, setUserDropdownVisibilityClass] =\r\n    useState(\"hidden\");\r\n\r\n  function toggleUserDropdown() {\r\n    if (userDropdownVisibilityClass === \"hidden\") {\r\n      setUserDropdownVisibilityClass(\"block\");\r\n    } else {\r\n      setUserDropdownVisibilityClass(\"hidden\");\r\n    }\r\n  }\r\n\r\n  const authModal = useContext(AuthModalContext);\r\n\r\n  const changePost = (subid) => {\r\n    dispatch(getPost(subid));\r\n    dispatch(currentSub.actions.setCurrentSub(subid));\r\n  };\r\n\r\n  // const user = useContext(UserContext);\r\n  const user = useSelector((state) => state.userSlice.userName);\r\n\r\n  function logout(e) {\r\n    authModal.removeCook(\"userName\");\r\n    dispatch(userSlice.actions.LogoutUser(user));\r\n    navigate(\"/\");\r\n  }\r\n\r\n  function SearchContent() {\r\n    dispatch(getSearchPost(search_content));\r\n    setSearch(\"\");\r\n  }\r\n\r\n  const activeEnter = (e) => {\r\n    if (e.key === \"Enter\") {\r\n      SearchContent();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"w-full bg-white p-2\">\r\n      <div className=\"mx-4 flex relative \">\r\n        <button\r\n          className=\"flex\"\r\n          onClick={() => {\r\n            changePost(-1);\r\n            // navigate(\"/\");\r\n          }}\r\n        >\r\n          <img src={logoImg} alt=\"\" className=\"w-8 h-8 mr-1\" />\r\n          <img src={title} alt=\"\" className=\"w-13 h-5 mr-4 mt-1\" />\r\n        </button>\r\n\r\n        <Bars3Icon\r\n          className={\"w-6 h-6 text-gray-400 my-1 block md:hidden\"}\r\n          ref={refOne}\r\n        ></Bars3Icon>\r\n        {/* <form\r\n          action=\"\"\r\n          className=\"bg-reddit_gray-brighter px-3 flex rounded-md border border-reddit_gray-700 mx-4 flex-grow\"\r\n        > */}\r\n        <div className=\"bg-reddit_gray-brighter px-3 flex rounded-md border border-reddit_gray-700 mx-4 flex-grow\">\r\n          <MagnifyingGlassIcon\r\n            className=\"text-gray-300 h-6 w-6 mt-1\"\r\n            onClick={() => SearchContent()}\r\n          />\r\n          <input\r\n            value={search_content}\r\n            type=\"text\"\r\n            onChange={(e) => setSearch(e.target.value)}\r\n            onKeyDown={(e) => activeEnter(e)}\r\n            className=\"bg-reddit_gray-brighter text-sm p-1 pl-2 pr-0 block focus:outline-none text-black relative  \"\r\n            placeholder=\"Search Reddit\"\r\n          />\r\n        </div>\r\n        {/* </form> */}\r\n\r\n        <div className=\"mx-2 hidden sm:block\">\r\n          {/* 로그인버튼 */}\r\n          {user === \"\" && (\r\n            <Button\r\n              outline\r\n              className=\"mr-1 h-8\"\r\n              onClick={() => authModal.setShow(\"login\")}\r\n            >\r\n              Log In\r\n            </Button>\r\n          )}\r\n\r\n          {/* 회원가입버튼 */}\r\n          {user === \"\" && (\r\n            <Button\r\n              className=\" h-8\"\r\n              onClick={() => authModal.setShow(\"register\")}\r\n            >\r\n              Sign up\r\n            </Button>\r\n          )}\r\n          {!(user === \"\") && (\r\n            <span className=\"block w-50 py-2 px-3 text-sm\">Hello, {user}!</span>\r\n          )}\r\n        </div>\r\n\r\n        {/* 유저 아이콘 */}\r\n        <button\r\n          className=\"rounded-md flex ml-3 \"\r\n          onClick={() => toggleUserDropdown()}\r\n        >\r\n          {user === \"\" && <UserIcon className=\"w-6 h-6 text-gray-400 m-1\" />}\r\n\r\n          {!(user === \"\") && (\r\n            <div className=\" w-8 h-8 bg-gray-600 rounded-md\">\r\n              <img\r\n                src={Avatar}\r\n                alt=\"\"\r\n                style={{ filter: \"invert(100%)\" }}\r\n                className=\"block\"\r\n              />\r\n            </div>\r\n          )}\r\n          <ChevronDownIcon className=\"text-gray-500 w-5 h-5 mt-2 m-1\" />\r\n        </button>\r\n        <div\r\n          className={\r\n            \"absolute right-0 top-8 bg-white border border-white z-10 rounded-md \" +\r\n            userDropdownVisibilityClass\r\n          }\r\n          ref={refOne}\r\n        >\r\n          {user === \"\" && (\r\n            <button\r\n              onClick={() => authModal.setShow(\"login\")}\r\n              className=\"block flex w-50 py-2 px-3 hover:bg-reddit_blue hover:text-white text-sm \"\r\n            >\r\n              <ArrowRightOnRectangleIcon className=\"w-5 h-5 mr-2\" /> Log In /\r\n              Sign up\r\n            </button>\r\n          )}\r\n          {!(user === \"\") && (\r\n            <button\r\n              onClick={(e) => logout()}\r\n              className=\"block flex w-50 py-2 px-3 hover:bg-gray-300 hover:text-black text-sm\"\r\n            >\r\n              <ArrowLeftOnRectangleIcon className=\"w-5 h-5 mr-2\" />\r\n              Logout\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}